{% if notifications %}
    {% for notif in notifications %}
    <div class="p-4 border-b noir-border border-opacity-10 hover:bg-accent/5 relative group transition-colors">
        <div class="flex items-start gap-3">
            <div class="flex-shrink-0 pt-1">
                <span class="text-accent font-bold">{% if notif.type == 'success' %}[OK]{% elif notif.type == 'warning' %}[WRN]{% else %}[INF]{% endif %}</span>
            </div>
            <div class="flex-1 min-w-0">
                <p class="text-[10px] font-bold uppercase leading-relaxed tracking-tight">{{ notif.message | safe }}</p>
                
                {% if notif.type == 'project_invite' and notif.project_id %}
                <div class="mt-3 flex gap-2">
                    {% set invite = current_user.id | get_pending_invite(notif.project_id) %}
                    {% if invite %}
                    <form action="{{ url_for('projects.respond_project_invite', invite_id=invite.id, action='accept') }}" method="POST">
                        <button class="noir-button text-[8px] py-1 px-3">ACCEPT</button>
                    </form>
                    <form action="{{ url_for('projects.respond_project_invite', invite_id=invite.id, action='decline') }}" method="POST">
                        <button class="noir-button-outline text-[8px] py-1 px-3">DECLINE</button>
                    </form>
                    {% endif %}
                </div>
                {% endif %}
                
                <p class="text-[8px] font-bold opacity-30 uppercase mt-2">TIMESTAMP: {{ notif.created_at.strftime('%H:%M') }}</p>
            </div>
        </div>
        
        <button class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"
                hx-post="/api/notifications/mark_read/{{ notif.id }}" 
                hx-swap="outerHTML" 
                hx-target="closest div"
                @click.stop="$el.closest('.group').remove(); if(unreadCount > 0) unreadCount--;">
            <span class="text-[8px] font-bold opacity-50 hover:opacity-100">[ACK]</span>
        </button>
    </div>
    {% endfor %}
{% else %}
    <div class="p-12 text-center opacity-30">
        <span class="text-[10px] font-bold uppercase tracking-widest">ALERTS_CLEAR // NO_PENDING_MESSAGES</span>
    </div>
{% endif %}
