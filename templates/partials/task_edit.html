<form hx-headers='{"X-CSRFToken": "{{ csrf_token() }}"}' hx-put="{{ url_for('main.update_task', task_id=task.id) }}" 
      hx-target="#task-{{ task.id }}" 
      hx-swap="outerHTML"
      class="noir-border bg-[var(--bg-alt)] p-6 space-y-6" id="task-{{ task.id }}">
    
    <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
        <div class="md:col-span-8">
            <label class="block text-[10px] font-bold opacity-50 uppercase mb-1">Update_Title</label>
            <input type="text" name="title" value="{{ task.title }}" required
                class="noir-input w-full font-bold">
        </div>
        <div class="md:col-span-4">
            <label class="block text-[10px] font-bold opacity-50 uppercase mb-1">Tags_Map</label>
            <input type="text" name="tags" value="{{ task.tags|map(attribute='name')|join(', ') }}" 
                class="noir-input w-full text-sm">
        </div>
    </div>
    
    <div>
        <label class="block text-[10px] font-bold opacity-50 uppercase mb-1">Supplement_Data</label>
        <textarea name="description" rows="2" class="noir-input w-full text-sm resize-none">{{ task.description or '' }}</textarea>
    </div>

    <div class="flex flex-wrap gap-6 items-end pt-2">
        <div class="flex-1 min-w-[150px]">
            <label class="block text-[10px] font-bold opacity-50 uppercase mb-1">Constraint_Time</label>
            <input type="datetime-local" name="due_date" value="{{ task.due_date.strftime('%Y-%m-%dT%H:%M') if task.due_date else '' }}"
                class="noir-input w-full text-sm">
        </div>
        <div class="w-24">
            <label class="block text-[10px] font-bold opacity-50 uppercase mb-1">Est_Poms</label>
            <input type="number" name="estimated_pomodoros" value="{{ task.estimated_pomodoros }}" min="1"
                class="noir-input w-full text-sm">
        </div>
        <div class="w-24">
            <label class="block text-[10px] font-bold opacity-50 uppercase mb-1">Priority</label>
            <select name="priority" class="noir-input w-full text-sm bg-transparent">
                <option value="1" {{ 'selected' if task.priority == 1 }}>L_01</option>
                <option value="2" {{ 'selected' if task.priority == 2 }}>L_02</option>
                <option value="3" {{ 'selected' if task.priority == 3 }}>L_03</option>
            </select>
        </div>
        <div class="flex gap-4">
            <button type="button" 
                    hx-get="{{ url_for('main.get_task_item', task_id=task.id) }}" 
                    hx-target="#task-{{ task.id }}"
                    hx-swap="outerHTML"
                    class="text-xs font-bold opacity-50 hover:opacity-100 uppercase underline">Abort</button>
            <button type="submit" class="noir-button text-xs px-6 py-2">COMMIT</button>
        </div>
    </div>
</form>
