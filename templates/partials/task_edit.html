<form hx-put="{{ url_for('update_task', task_id=task.id) }}" 
      hx-target="#task-{{ task.id }}" 
      hx-swap="outerHTML"
      class="bg-white p-4 rounded-lg shadow border border-indigo-200" id="task-{{ task.id }}">
    
    <div class="grid grid-cols-1 md:grid-cols-12 gap-3 mb-3">
        <div class="md:col-span-8">
            <input type="text" name="title" value="{{ task.title }}" required
                class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-indigo-500 font-medium">
        </div>
        <div class="md:col-span-4">
            <input type="text" name="tags" value="{{ task.tags|map(attribute='name')|join(', ') }}" placeholder="Tags"
                class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-indigo-500 text-sm">
        </div>
    </div>
    
    <div class="mb-3">
        <textarea name="description" rows="2" placeholder="Description"
            class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:border-indigo-500 text-sm">{{ task.description or '' }}</textarea>
    </div>

    <div class="flex flex-wrap gap-3 items-end">
        <div class="flex-1">
            <label class="block text-xs font-semibold text-gray-500 mb-1">Due Date</label>
            <input type="datetime-local" name="due_date" value="{{ task.due_date.strftime('%Y-%m-%dT%H:%M') if task.due_date else '' }}"
                class="w-full p-1.5 border border-gray-300 rounded focus:outline-none focus:border-indigo-500 text-sm">
        </div>
        <div class="w-24">
            <label class="block text-xs font-semibold text-gray-500 mb-1">Pomodoros</label>
            <input type="number" name="estimated_pomodoros" value="{{ task.estimated_pomodoros }}" min="1"
                class="w-full p-1.5 border border-gray-300 rounded focus:outline-none focus:border-indigo-500 text-sm">
        </div>
        <div class="flex gap-2">
            <button type="button" 
                    hx-get="{{ url_for('get_task_item', task_id=task.id) }}" 
                    hx-target="#task-{{ task.id }}"
                    hx-swap="outerHTML"
                    class="px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 rounded">
                Cancel
            </button>
            <button type="submit" class="px-3 py-1.5 text-sm bg-indigo-600 text-white rounded hover:bg-indigo-700">
                Save
            </button>
        </div>
    </div>
</form>