<div class="layout">
  <div class="columns">
    <!-- Main Task List (70% width) -->
    <div class="column">
      <span class="label">Priority Nodes // Queue</span>
      <div class="list" data-list-limit="true">
        {% for task in tasks %}
        <div class="item">
          <div class="meta">
            <span class="index">P{{ task.priority }}</span>
          </div>
          <div class="content">
            <span class="title title--small">{{ task.title }}</span>
            {% if task.description %}
              <span class="description">{{ task.description | truncate: 50 }}</span>
            {% endif %}
            
            <div class="flex gap--xsmall items--center t-mt-1">
              {% if task.pinned %}
                <span class="label label--small label--underline">PINNED</span>
              {% endif %}
              {% for tag in task.tags %}
                <span class="label label--small">{{ tag }}</span>
              {% endfor %}
            </div>
          </div>
          
          <!-- Progress Stats -->
          <div class="meta meta--right">
            <span class="label label--small">{{ task.progress }}</span>
            <div class="flex gap--xsmall">
              {% assign parts = task.progress | split: '/' %}
              {% assign done = parts[0] | plus: 0 %}
              {% assign total = parts[1] | plus: 0 %}
              {% for i in (1..total) %}
                <div class="dot {% if i <= done %}dot--filled{% endif %}"></div>
              {% endfor %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Sidebar (30% width) -->
    <div class="column column--one-third">
      <span class="label">System Vitals</span>
      <div class="list">
        <div class="item">
          <div class="content">
            <span class="title title--small">{{ subject }}</span>
            <span class="description">Status: {{ status }}</span>
            <span class="description">Tasks: {{ tasks.size }}</span>
          </div>
        </div>
        <div class="item">
          <div class="content">
            <span class="title title--small">Legend</span>
            <span class="description">P3: High</span>
            <span class="description">P1: Standard</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer System Bar -->
<div class="title_bar">
  <div class="flex items--center gap--small">
    <img src="https://trmnl.com/images/plugins/trmnl--render.svg" style="width: 20px; height: 20px; filter: grayscale(1);">
    <span class="title">MODO_OS // {{ "now" | date: "%H:%M %p %Z" }}</span>
  </div>
</div>

<style>
  .t-mt-1 { margin-top: 4px; }
  .dot { width: 6px; height: 6px; border: 1px solid black; }
  .dot--filled { background-color: black; }
  /* Ensure column split is visible */
  .column--one-third { border-left: 1px solid #eee; padding-left: 15px; }
</style>
